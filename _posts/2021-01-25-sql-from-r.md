---
layout: post
title: "How to Write SQL From R"
date:   2021-01-26 07:00:00
excerpt: "SQL queries getting you down? Let R write SQL queries for you!"
author: "Matt Dancho"
categories: [Code-Tools]
tags: [R-Bloggers, Learn-R, R, R-Tips, DBI, SQL]
image: /assets/2021-01-25-sql-from-r/write_sql_cover.png
image_preview: /assets/2021-01-25-sql-from-r/write_sql_preview.png
---

The problem with SQL is that there are so many "flavors" (every database has it's own version of SQL and they _are_ different) and remembering how to do simple things can be a pain. What if I told you there was an easier way? There is!

### Table of Contents

Today I'm going to show you how to nd today I'm going to show you how you can write SQL from R. Here's what you're learning today:

* Tutorial: Write SQL from R and query the database (without writing _any_ SQL code)
* **Bonus: Formatting SQL like a SQL expert**

![SQL From R](/assets/2021-01-25-sql-from-r/show_query_3.jpg)

# R-Tips Weekly

This article is part of R-Tips Weekly, a <a href="https://learn.business-science.io/r-tips-newsletter">weekly video tutorial</a> that shows you step-by-step how to do common R coding tasks. Pretty cool, right?

<p>Here are the links to get set up. ðŸ‘‡</p>

<ul> 
    <li><a href="https://learn.business-science.io/r-tips-newsletter">Get the Code</a></li> 
    <li><a href="https://youtu.be/0zP_nx3-k6E">YouTube Tutorial</a></li> 
</ul>

# This Tutorial is Available in Video

I have a companion video tutorial that shows even more secrets (plus mistakes to avoid). And, Iâ€™m finding that a lot of my students prefer the dialogue that goes along with coding. So check out this video to see me running the code in this tutorial. ðŸ‘‡

<iframe width="100%" height="450" src="https://www.youtube.com/embed/0zP_nx3-k6E" title="YouTube video player" frameborder="1" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

# Writing SQL from R

![](/assets/2021-01-25-sql-from-r/generate-sql-from-r.jpg)

We're going to **generate SQL from R** using 3 key packages:
- `DBI` - For connecting to & working with databases
- `RSQLite` - For working with the SQLite-variety of database
- `tidyverse` - Gives us `dbplyr` - the database-backened to dplyr - FOR FREE!! OMG!


<h2>Step 1: Connect to database<br><small>Use DBI to make a connection</small></h2>

DBI has the `dbConnect()` function. Let's use this to establish a connection with our SQL database. 

![](/assets/2021-01-25-sql-from-r/db_connect.jpg)

**Examine the connection.** You should see a connection object has been created and the SQL database has one table named "MPG".

![](/assets/2021-01-25-sql-from-r/db_connect_2.jpg)


<h2>Step 2: Write Dplyr, Generate SQL<br>
<small>Use the dbplyr backend to auto-magically create SQL for us.</small></h2>

DBI has the `show_query()` function we can use to generate SQL... 

![](/assets/2021-01-25-sql-from-r/show_query_1.jpg)

## Bonus: The SQL Comes Formatted

...and here's the result! See how the SQL query using `show_query()` is automatically formatted. Amazing. 

(And now your boss thinks you're an expert in SQL.)

![](/assets/2021-01-25-sql-from-r/show_query_3.jpg)

# ðŸ’¡ Conclusions

You learned how to write SQL from R, connect to a database and query it all from the compfort of R and `dplyr`. Great work! **But, thereâ€™s a lot more to becoming a data scientist.**

If you'd like to become a Business Scientist (and have an awesome career, improve your quality of life, enjoy your job, and all the fun that comes along), then I can help with that.

# My Struggles with Learning Data Science

It took me a long time to learn how to apply data science to business. And I made a lot of mistakes as I fumbled through learning R.

I specifically had a tough time navigating the ever-increasing landscape of tools and packages, trying to pick between R and Python, and getting lost along the way.

**If you feel like this, you're not alone.**

In fact, that's the driving reason that I created Business Science and Business Science University ([You can read about my personal journey here](https://www.business-science.io/business/2019/07/22/how-i-started-my-data-science-business.html)).

What I found out is that:

1. **Data Science does not have to be difficult, it just has to be taught from a business perspective**
2. **Anyone can learn data science fast provided they are motivated.**

# How I can help

If you are interested in learning R and the ecosystem of tools at a deeper level, then I have a streamlined program that will **get you past your struggles** and improve your career in the process.

It's my [5-Course R-Track System](https://university.business-science.io/p/5-course-bundle-machine-learning-web-apps-time-series/). It's an integrated system containing 5 courses that work together on a learning path. Through 8 projects, you learn everything you need to help your organization: from data science foundations, to advanced machine learning, to web applications and deployment.

The result is that **you break through previous struggles**, learning from my experience & our community of 2653 data scientists that are ready to help you succeed.

Ready to take the next step? Then [let's get started.](https://university.business-science.io/p/5-course-bundle-machine-learning-web-apps-time-series/)

![](/assets/rtrack_what_theyre_doing_2.jpg)

<p style="font-size: 36px;text-align: center;"><a href="https://university.business-science.io/p/5-course-bundle-machine-learning-web-apps-time-series">Join My 5-Course R-Track Program<br>(Become A 6-Figure Data Scientist)</a></p>
